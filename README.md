# eleventy-plugin-code-clipboard

This plugin applies clipboard copy button to code snippets block(`code`tag) generated by eleventy.

The clipboard copy feature uses [clipboard.js](https://www.npmjs.com/package/clipboard) library.
This Plugin assumes using with [eleventy-plugin-syntaxhighlight](https://github.com/11ty/eleventy-plugin-syntaxhighlight) plugin.

Plugin consists of the following contents.

`markdown-it custom renderer`

The code fence with language are attached clipboard copy button(nothing to do with non-language block).
Of course, it only supports eleventy markdown template(markdown-it).

The clipboard button is provided by [Material Design Icons](https://materialdesignicons.com/) `content-copy` icon.

`eleventy shortcode function`

This shortcode initializes clipboard.js on window.onload.
If clipboard copy succeeded, it shows a tooltips with message(default to `Copied!`).
Tooltips use [Primer Tooltips](https://primer.style/css/components/tooltips) CSS framework.

## Usage

Add the following code to project's `.eleventy.js`.

```js
const syntaxHighlight = require("@11ty/eleventy-plugin-syntaxhighlight");
const codeClipboard = require("eleventy-plugin-code-clipboard");

module.exports = function (eleventyConfig) {
  eleventyConfig.addPlugin(syntaxHighlight);
  eleventyConfig.addPlugin(codeClipboard);
  
  // others
  
  const markdownLibrary = markdownIt({
    html: true
  }).use(codeClipboard.markdownItCopyButton);
  
  eleventyConfig.setLibrary("md", markdownLibrary);
  
  return {
    // put your settings
  }
}
```

Add Primer/MDI CSS to your CSS or HTML.

```css
@import url("https://cdn.jsdelivr.net/npm/@mdi/font@6.5.95/css/materialdesignicons.min.css");
@import url("https://cdnjs.cloudflare.com/ajax/libs/Primer/19.1.1/tooltips.min.css");
```

or

```html
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@6.5.95/css/materialdesignicons.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/19.1.1/tooltips.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
```

Add 11ty shortcode(named `initClipboardJS`) function your template. This will generate javascript code that initialize clipboard.js and attach onclick eventListener in your HTML.

```html
<html>
  <head>...</head>
  <body>
    ...
    {% initClipboardJS %}
  </body>
</html>
```

## Configuration

T.B.D